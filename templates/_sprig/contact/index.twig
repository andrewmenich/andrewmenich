{% set name = name ?? '' %}
{% set email = email ?? '' %}
{% set message = message ?? '' %}

{% set nameError = nameError[0] ?? '' %}
{% set emailError = emailError[0] ?? ''%}
{% set messageError = messageError[0] ?? '' %}
{% set responseMessage = responseMessage ?? '' %}

{% set success = success ?? null %}

{% if not responseMessage|length %}

<form sprig s-action="sendMessage" s-method="post" s-indicator="" class="flex flex-wrap -m-2" >

  <input type="text" name="notforhumans" value="" style="display:none;" />

  <div class="w-1/2 p-2">
    <div class="">
      <label for="name" class="text-sm leading-7 {{ nameError|length ? 'text-red-500' : 'text-gray-600'}}">Name<sup class="">*</sup></label>
      <input 
        type="text" 
        id="name" 
        name="name" 
        class="w-full px-3 py-1 text-base leading-8 text-gray-700 transition-colors duration-200 ease-in-out bg-gray-100 bg-opacity-50 border rounded outline-none focus:bg-white focus:ring-2 {{ nameError|length ? 'border-red-500 focus:border-red-500 focus:ring-red-500 focus:ring-red' : 'border-gray-300 focus:border-teal focus:ring-teal'}}"
        value="{{name}}"
        {% if nameError|length %}
        aria-invalid="true"
        aria-describedBy="nameError"
        {% endif %}
        >
        {% if nameError|length %}
        <span id="nameError" class="block mt-2 text-sm text-red-500">{{ nameError }}</span>
        {% endif %}
    </div>
  </div>

  <div class="w-1/2 p-2">
    <div class="">
      <label for="email" class="text-sm leading-7 {{ emailError|length ? 'text-red-500' : 'text-gray-600'}}">Email<sup class="">*</sup></label>
      <input 
        type="email" 
        id="email" 
        name="email" 
        class="w-full px-3 py-1 text-base leading-8 text-gray-700 transition-colors duration-200 ease-in-out bg-gray-100 bg-opacity-50 border rounded outline-none focus:bg-white focus:ring-2 {{ emailError|length ? 'border-red-500 focus:border-red-500 focus:ring-red-500 focus:ring-red' : 'border-gray-300 focus:border-teal focus:ring-teal'}}"
        value="{{email}}"
        {% if emailError|length %}
        aria-invalid="true"
        aria-describedBy="emailError"
        {% endif %}
        >
        {% if emailError|length %}
        <span id="emailError" class="block mt-2 text-sm text-red-500">{{ emailError }}</span>
        {% endif %}
    </div>
  </div>

  <div class="w-full p-2">
    <div class="">
      <label for="message" class="text-sm leading-7 {{ messageError|length ? 'text-red-500' : 'text-gray-600'}}">Message<sup class="">*</sup></label>
      <textarea 
        id="message" 
        name="message" 
        class="w-full h-32 px-3 py-1 text-base leading-6 text-gray-700 transition-colors duration-200 ease-in-out bg-gray-100 bg-opacity-50 border  rounded outline-none resize-none focus:bg-white focus:ring-2  {{ messageError|length ? 'border-red-500 focus:border-red-500 focus:ring-red-500 focus:ring-red' : 'border-gray-300 focus:border-teal focus:ring-teal'}}"
        {% if messageError|length %}
        aria-invalid="true"
        aria-describedBy="messageError"
        {% endif %}
        >{{message}}</textarea>

      {% if messageError|length %}
        <span id="messageError" class="block mt-2 text-sm text-red-500">{{ messageError }}</span>
      {% endif %}

    </div>
  </div>
  <div class="w-full p-2">
    <button 
      type="submit" 
      class="flex px-8 py-2 mx-auto text-lg text-white transition border-0 rounded bg-night focus:outline-none hover:text-sand focus:text-sand">
      <span class="button-text">Send Message</span>
      <span class="loader">
        {{ svg('@svg/loader-one.svg')|attr({class: 'w-10 h-8'}) }}
      </span>
    </button>
  </div>

  <div class="w-full p-2 pt-8 mt-8 text-center border-t border-gray-200">
    <a href="mailto:andrew@andrewmenich.com" class="block transition text-teal hover:text-valencia">andrew@andrewmenich.com</a>
    <span class="inline-flex">
      <a class="block mx-1 text-teal hover:text-valencia" href="https://github.com/andrewmenich" title="GitHub" rel="noopener noreferrer">
        {{svg('@svg/github.svg')|attr({class: 'w-5 h-5'})}}
      </a>
{#      <a class="block mx-1 text-teal hover:text-valencia" href="https://www.linkedin.com/in/andrew-menich-10225813b/" title="LinkedIn" rel="noopener noreferrer">#}
{#        {{svg('@svg/linkedin.svg')|attr({class: 'w-5 h-5'})}}#}
{#      </a>#}
      <a class="block mx-1 text-teal hover:text-valencia" href="https://twitter.com/AndrewMenich" title="Twitter" rel="noopener noreferrer">
        {{svg('@svg/twitter.svg')|attr({class: 'w-5 h-5'})}}
      </a>
    </span>
  </div>
</form>
{% else %}

<p class="text-lg text-center text-teal">{{responseMessage}}</p>

{% endif %}